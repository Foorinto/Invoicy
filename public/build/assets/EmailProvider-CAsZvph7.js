import{e as P,p as D,c as d,a as b,u as r,h as L,w as k,b as e,s as w,g as m,t as n,f as N,o as i,F as f,r as _,n as j,q as y,C as T,d as g,v as H,O as E,B as F,A as z,k as U,j as $}from"./app-DpzK6ptn.js";import{_ as I}from"./AppLayout-D8VQPrWn.js";import{u as R}from"./useTranslations-D4VoZMXw.js";import"./ApplicationLogo-6y7SMeKy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-D1jsfg6O.js";const G={class:"text-xl font-semibold text-gray-900 dark:text-white"},J={class:"mb-6 border-b border-gray-200 dark:border-gray-700"},K={class:"flex space-x-8","aria-label":"Settings tabs"},Q={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},W={class:"px-6 py-4 space-y-4"},X=["onClick"],Y={class:"flex items-center h-5"},Z=["id","value"],ee={class:"ml-3"},te=["for"],re={key:0,class:"ml-2 inline-flex items-center rounded-full bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800 dark:bg-green-900 dark:text-green-200"},se={class:"text-sm text-gray-500 dark:text-gray-400"},oe={key:0,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},de={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ie={class:"text-lg font-medium text-gray-900 dark:text-white"},ae={class:"px-6 py-4 space-y-4"},ne=["for"],le={key:0,class:"text-red-500"},ue=["id","onUpdate:modelValue"],ce=["value"],ge={key:1,class:"relative mt-1"},me=["id","type","onUpdate:modelValue","required"],pe=["onClick"],ye={key:0,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ve={key:1,class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xe=["id","type","onUpdate:modelValue","required"],be={key:0,class:"text-sm text-red-600"},ke={key:1,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},he={class:"px-6 py-4 space-y-4"},fe={key:2,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},we={class:"px-6 py-4"},_e={class:"flex items-center justify-between"},Ce={class:"flex items-center space-x-3"},Me={key:0,class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ve={key:1,class:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},je={class:"font-medium text-gray-900 dark:text-white"},Ee={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Fe=["disabled"],ze={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Ue={class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Be={class:"flex justify-end space-x-3"},qe=["disabled"],Oe={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Te={__name:"EmailProvider",props:{settings:Object,providers:Object,smtpFields:Object,postmarkFields:Object,resendFields:Object,userEmail:String},setup(u){const{t:v}=R(),p=u,s=P({provider:p.settings.provider||"faktur",from_address:p.settings.from_address||"",from_name:p.settings.from_name||"",config:{}}),x=U(!1),h=U({}),C=z(()=>{switch(s.provider){case"smtp":return p.smtpFields;case"postmark":return p.postmarkFields;case"resend":return p.resendFields;default:return{}}});D(()=>s.provider,c=>{s.config={};const t=C.value;Object.keys(t).forEach(a=>{t[a].default!==void 0&&(s.config[a]=t[a].default)})},{immediate:!0});const M=z(()=>["smtp","postmark","resend"].includes(s.provider)),B={faktur:"Envoi via les serveurs de faktur.lu. Aucune configuration requise.",smtp:"Utilisez votre propre serveur SMTP (Gmail, Office 365, OVH, etc.).",postmark:"Service d'email transactionnel premium avec excellent taux de délivrabilité.",resend:"API email moderne et simple à configurer."},q=()=>{s.put(route("settings.email.provider.update"),{preserveScroll:!0})},O=()=>{x.value=!0,$.post(route("settings.email.provider.test"),{},{preserveScroll:!0,onFinish:()=>{x.value=!1}})},S=c=>{h.value[c]=!h.value[c]},A=(c,t)=>t.type==="password"?h.value[c]?"text":"password":t.type||"text";return(c,t)=>(i(),d(f,null,[b(r(L),{title:"Configuration Email"}),b(I,null,{header:k(()=>[e("h1",G,n(r(v)("settings")),1)]),default:k(()=>[e("div",J,[e("nav",K,[b(r(w),{href:c.route("settings.business.edit"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"},{default:k(()=>[m(n(r(v)("business_settings")),1)]),_:1},8,["href"]),b(r(w),{href:c.route("settings.email"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"},{default:k(()=>[m(n(r(v)("email_settings")),1)]),_:1},8,["href"]),b(r(w),{href:c.route("settings.email.provider"),class:"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-indigo-500 text-indigo-600 dark:text-indigo-400"},{default:k(()=>[...t[3]||(t[3]=[m(" Fournisseur Email ",-1)])]),_:1},8,["href"])])]),e("form",{onSubmit:N(q,["prevent"]),class:"space-y-6"},[e("div",Q,[t[4]||(t[4]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Provider d'envoi"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Choisissez comment envoyer vos factures par email. ")],-1)),e("div",W,[(i(!0),d(f,null,_(u.providers,(a,o)=>(i(),d("div",{key:o,class:j(["relative flex items-start p-4 border rounded-lg cursor-pointer transition-colors",r(s).provider===o?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-400":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"]),onClick:l=>r(s).provider=o},[e("div",Y,[y(e("input",{id:"provider-"+o,type:"radio",value:o,"onUpdate:modelValue":t[0]||(t[0]=l=>r(s).provider=l),class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,8,Z),[[T,r(s).provider]])]),e("div",ee,[e("label",{for:"provider-"+o,class:"font-medium text-gray-900 dark:text-white cursor-pointer"},[m(n(a)+" ",1),o==="faktur"?(i(),d("span",re," Recommandé ")):g("",!0)],8,te),e("p",se,n(B[o]),1)])],10,X))),128))])]),M.value?(i(),d("div",oe,[e("div",de,[e("h2",ie," Configuration "+n(u.providers[r(s).provider]),1)]),e("div",ae,[(i(!0),d(f,null,_(C.value,(a,o)=>(i(),d("div",{key:o},[e("label",{for:o,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[m(n(a.label)+" ",1),a.required?(i(),d("span",le,"*")):g("",!0)],8,ne),a.type==="select"?y((i(),d("select",{key:0,id:o,"onUpdate:modelValue":l=>r(s).config[o]=l,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[(i(!0),d(f,null,_(a.options,(l,V)=>(i(),d("option",{key:V,value:V},n(l),9,ce))),128))],8,ue)),[[H,r(s).config[o]]]):a.type==="password"?(i(),d("div",ge,[y(e("input",{id:o,type:A(o,a),"onUpdate:modelValue":l=>r(s).config[o]=l,required:a.required,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white pr-10"},null,8,me),[[E,r(s).config[o]]]),e("button",{type:"button",onClick:l=>S(o),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-500"},[h.value[o]?(i(),d("svg",ye,[...t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])])):(i(),d("svg",ve,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)])]))],8,pe)])):y((i(),d("input",{key:2,id:o,type:a.type||"text","onUpdate:modelValue":l=>r(s).config[o]=l,required:a.required,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,8,xe)),[[E,r(s).config[o]]])]))),128)),r(s).errors.config?(i(),d("p",be,n(r(s).errors.config),1)):g("",!0)])])):g("",!0),M.value?(i(),d("div",ke,[t[9]||(t[9]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-medium text-gray-900 dark:text-white"},"Expéditeur"),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Personnalisez l'adresse et le nom de l'expéditeur. ")],-1)),e("div",he,[e("div",null,[t[7]||(t[7]=e("label",{for:"from_address",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Adresse email ",-1)),y(e("input",{id:"from_address",type:"email","onUpdate:modelValue":t[1]||(t[1]=a=>r(s).from_address=a),placeholder:"contact@votreentreprise.lu",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[F,r(s).from_address]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"from_name",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Nom de l'expéditeur ",-1)),y(e("input",{id:"from_name",type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>r(s).from_name=a),placeholder:"Votre Entreprise",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,512),[[F,r(s).from_name]])])])])):g("",!0),u.settings.provider!=="faktur"?(i(),d("div",fe,[e("div",we,[e("div",_e,[e("div",Ce,[e("div",{class:j(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",u.settings.provider_verified?"bg-green-100 dark:bg-green-900":"bg-yellow-100 dark:bg-yellow-900"])},[u.settings.provider_verified?(i(),d("svg",Me,[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])):(i(),d("svg",Ve,[...t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])]))],2),e("div",null,[e("p",je,n(u.settings.provider_verified?"Configuration vérifiée":"Configuration non vérifiée"),1),u.settings.last_test_at?(i(),d("p",Ee," Dernier test : "+n(u.settings.last_test_at),1)):g("",!0)])]),e("button",{type:"button",onClick:O,disabled:x.value||r(s).processing,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},[x.value?(i(),d("svg",ze,[...t[12]||(t[12]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):g("",!0),m(" "+n(x.value?"Envoi en cours...":"Envoyer un email de test"),1)],8,Fe)]),e("p",Ue," Un email de test sera envoyé à "+n(u.userEmail)+". ",1)])])):g("",!0),e("div",Be,[e("button",{type:"submit",disabled:r(s).processing,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 disabled:opacity-50"},[r(s).processing?(i(),d("svg",Oe,[...t[13]||(t[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):g("",!0),m(" "+n(r(s).processing?r(v)("saving"):r(v)("save")),1)],8,qe)])],32)]),_:1})],64))}};export{Te as default};
