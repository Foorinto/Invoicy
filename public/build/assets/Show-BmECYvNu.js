import{k as b,e as ee,c as n,a as L,u as i,h as te,w as f,b as e,t,o,d as c,g,i as U,s as j,F as k,r as p,n as V,q as $,C as T,v as se,A as S,j as R,H as ae}from"./app-DttYSkTm.js";import{_ as ie}from"./AppLayout-Cm3hgk2p.js";import{u as re}from"./useTranslations-CnG4bCOe.js";import"./ApplicationLogo-B-JWj0-W.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-B3_USSZS.js";const oe={class:"flex items-center justify-between"},de={class:"flex items-center space-x-4"},ne={class:"text-xl font-semibold text-gray-900 dark:text-white"},le={key:0,class:"text-red-600 dark:text-red-400"},ce={class:"flex items-center space-x-3"},ge=["disabled"],ue=["disabled"],he=["disabled"],ye={class:"space-y-6"},xe={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},ve={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},me={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},be={class:"text-lg font-medium text-gray-900 dark:text-white"},_e={class:"px-6 py-4"},fe={key:0,class:"text-sm text-gray-700 dark:text-gray-300 space-y-1"},ke={class:"font-semibold"},pe={key:0},we={key:1},Ce={class:"pt-2"},ze={class:"text-gray-500"},Me={key:2},Le={class:"text-gray-500"},je={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Se={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Be={class:"text-lg font-medium text-gray-900 dark:text-white"},Fe={class:"px-6 py-4"},Ve={key:0,class:"text-sm text-gray-700 dark:text-gray-300 space-y-1"},$e={class:"font-semibold"},He={key:0},Ne={key:1},Ae={key:2,class:"pt-2"},De={class:"text-gray-500"},Pe={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Ue={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Te={class:"text-lg font-medium text-gray-900 dark:text-white"},Re={class:"px-6 py-4"},Ee={class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},qe={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Ie={class:"mt-1 text-sm text-gray-900 dark:text-white"},Oe={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Ge={class:"mt-1 text-sm text-gray-900 dark:text-white"},Je={key:0},Ke={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Qe={class:"mt-1 text-sm text-gray-900 dark:text-white"},We={key:1},Xe={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Ye={class:"mt-1 text-sm text-gray-900 dark:text-white"},Ze={key:2},et={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},tt={class:"mt-1 text-sm text-gray-900 dark:text-white"},st={key:3},at={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},it={class:"mt-1 text-sm text-gray-900 dark:text-white"},rt={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ot={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},dt={class:"text-lg font-medium text-gray-900 dark:text-white"},nt={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ct={class:"bg-gray-50 dark:bg-gray-700"},gt={class:"py-3.5 pl-6 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-white"},ut={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},ht={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},yt={class:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 dark:text-white"},xt={class:"py-3.5 pl-3 pr-6 text-right text-sm font-semibold text-gray-900 dark:text-white"},vt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-800"},mt={class:"py-4 pl-6 pr-3 text-sm text-gray-900 dark:text-white"},bt={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},_t={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},ft={class:"whitespace-nowrap px-3 py-4 text-right text-sm text-gray-500 dark:text-gray-400"},kt={class:"whitespace-nowrap py-4 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},pt={class:"bg-gray-50 dark:bg-gray-700"},wt={colspan:"4",class:"py-3 pl-6 pr-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400"},Ct={class:"whitespace-nowrap py-3 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},zt={colspan:"4",class:"py-3 pl-6 pr-3 text-right text-sm font-medium text-gray-500 dark:text-gray-400"},Mt={class:"whitespace-nowrap py-3 pl-3 pr-6 text-right text-sm font-medium text-gray-900 dark:text-white"},Lt={class:"border-t-2 border-gray-300 dark:border-gray-600"},jt={colspan:"4",class:"py-3 pl-6 pr-3 text-right text-sm font-bold text-gray-900 dark:text-white"},St={key:0,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Bt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Ft={class:"text-lg font-medium text-gray-900 dark:text-white"},Vt={class:"px-6 py-4"},$t={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Ht={key:1,class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},Nt={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},At={class:"text-lg font-medium text-gray-900 dark:text-white"},Dt={class:"px-6 py-4"},Pt={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ut={class:"text-sm text-red-600 dark:text-red-400"},Tt={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Rt={class:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0"},Et={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all dark:bg-gray-800 sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},qt={class:"px-4 pt-5 pb-4 sm:p-6"},It={class:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4"},Ot={class:"mb-4"},Gt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Jt={class:"flex space-x-4"},Kt={class:"flex items-center"},Qt={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},Wt={class:"flex items-center"},Xt={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},Yt={class:"mb-4"},Zt={for:"credit_note_reason",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},es=["value"],ts={key:0,class:"mb-4"},ss={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},as={class:"border rounded-md divide-y dark:border-gray-600 dark:divide-gray-600 max-h-48 overflow-y-auto"},is=["checked","onChange"],rs={class:"ml-3 flex-1 text-sm text-gray-700 dark:text-gray-300"},os={class:"text-sm text-gray-500 dark:text-gray-400"},ds={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},ns={class:"bg-gray-50 dark:bg-gray-700 rounded-md p-3 mb-4"},ls={class:"flex justify-between items-center"},cs={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},gs={class:"text-lg font-bold text-red-600 dark:text-red-400"},us={class:"text-sm text-gray-500 dark:text-gray-400"},hs={class:"bg-gray-50 px-4 py-3 dark:bg-gray-700 sm:flex sm:flex-row-reverse sm:px-6"},ys=["disabled"],xs={key:1,class:"fixed inset-0 z-50 overflow-hidden"},vs={class:"flex items-center justify-center min-h-screen p-4"},ms={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] flex flex-col"},bs={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700"},_s={class:"text-lg font-medium text-gray-900 dark:text-white"},fs={key:0,class:"text-red-600 dark:text-red-400"},ks={class:"flex items-center space-x-2"},ps={class:"flex items-center border border-gray-300 dark:border-gray-600 rounded-md overflow-hidden"},ws=["onClick","title"],Cs=["href"],zs={class:"flex-1 overflow-auto p-6 bg-gray-100 dark:bg-gray-900"},Ms={key:0,class:"flex items-center justify-center h-96"},Ls=["innerHTML"],js={class:"flex items-center justify-end px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"},Ns={__name:"Show",props:{invoice:Object},setup(s){var P;const{t:a}=re(),m=s,u=b(!1),w=b(!1),h=b("full"),y=b([]),_=b(!1),B=b(""),F=b(!1),C=b(((P=m.invoice.buyer_snapshot)==null?void 0:P.locale)||"fr"),E=[{value:"fr",label:"FranÃ§ais",flag:"ðŸ‡«ðŸ‡·"},{value:"de",label:"Deutsch",flag:"ðŸ‡©ðŸ‡ª"},{value:"en",label:"English",flag:"ðŸ‡¬ðŸ‡§"},{value:"lb",label:"LÃ«tzebuergesch",flag:"ðŸ‡±ðŸ‡º"}],q=S(()=>`${route("invoices.pdf.stream",m.invoice.id)}?locale=${C.value}`),H=async()=>{F.value=!0;try{const l=route("invoices.preview-html",m.invoice.id)+`?locale=${C.value}`,r=await ae.get(l);B.value=r.data.html}catch(l){console.error("Error loading preview:",l),B.value=`<p style="color: red; padding: 20px;">${a("error_loading_preview")}</p>`}finally{F.value=!1}},I=l=>{C.value=l,_.value&&H()},O=()=>{_.value=!0,H()},x=ee({reason:"cancellation",item_ids:null}),N=S(()=>({billing_error:a("billing_error"),return:a("return_merchandise"),commercial_discount:a("commercial_discount"),cancellation:a("invoice_cancellation"),other:a("other")})),A=S(()=>h.value==="partial"?y.value.length>0:!0),G=S(()=>m.invoice.items?m.invoice.items.filter(l=>y.value.includes(l.id)).reduce((l,r)=>l+parseFloat(r.total_ttc||0),0):0),J=l=>{const r={draft:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",finalized:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",sent:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",cancelled:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return r[l]||r.draft},K=l=>({draft:a("draft"),finalized:a("finalized"),sent:a("sent"),paid:a("paid"),cancelled:a("cancelled")})[l]||l,v=(l,r="EUR")=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:r}).format(l),z=l=>l?new Date(l).toLocaleDateString("fr-FR"):"-",Q=()=>{u.value||(u.value=!0,R.post(route("invoices.mark-sent",m.invoice.id),{},{preserveScroll:!0,onFinish:()=>u.value=!1}))},W=()=>{u.value||(u.value=!0,R.post(route("invoices.mark-paid",m.invoice.id),{},{preserveScroll:!0,onFinish:()=>u.value=!1}))},X=()=>{h.value="full",y.value=[],x.reason="cancellation",x.item_ids=null,w.value=!0},D=()=>{w.value=!1},Y=l=>{const r=y.value.indexOf(l);r===-1?y.value.push(l):y.value.splice(r,1)},Z=()=>{A.value&&(h.value==="partial"?x.item_ids=y.value:x.item_ids=null,x.post(route("invoices.credit-note",m.invoice.id),{preserveScroll:!0,onSuccess:()=>{w.value=!1}}))};return(l,r)=>(o(),n(k,null,[L(i(te),{title:`${i(a)("invoice")} ${s.invoice.number}`},null,8,["title"]),L(ie,null,{header:f(()=>[e("div",oe,[e("div",de,[L(i(j),{href:l.route("invoices.index"),class:"text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400"},{default:f(()=>[...r[6]||(r[6]=[e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z","clip-rule":"evenodd"})],-1)])]),_:1},8,["href"]),e("h1",ne,[s.invoice.type==="credit_note"?(o(),n("span",le,t(i(a)("credit_note")),1)):c("",!0),g(" "+t(s.invoice.number),1)]),e("span",{class:V([J(s.invoice.status),"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium"])},t(K(s.invoice.status)),3)]),e("div",ce,[e("button",{type:"button",onClick:O,class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},[r[7]||(r[7]=e("svg",{class:"h-4 w-4 mr-1.5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1)),g(" "+t(i(a)("preview")),1)]),s.invoice.status==="finalized"?(o(),n("button",{key:0,onClick:Q,disabled:u.value,class:"inline-flex items-center rounded-md bg-yellow-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-yellow-500 disabled:opacity-50"},[r[8]||(r[8]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M3 4a2 2 0 00-2 2v1.161l8.441 4.221a1.25 1.25 0 001.118 0L19 7.162V6a2 2 0 00-2-2H3z"}),e("path",{d:"M19 8.839l-7.77 3.885a2.75 2.75 0 01-2.46 0L1 8.839V14a2 2 0 002 2h14a2 2 0 002-2V8.839z"})],-1)),g(" "+t(i(a)("mark_as_sent")),1)],8,ge)):c("",!0),s.invoice.status==="sent"?(o(),n("button",{key:1,onClick:W,disabled:u.value,class:"inline-flex items-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 disabled:opacity-50"},[r[9]||(r[9]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z","clip-rule":"evenodd"})],-1)),g(" "+t(i(a)("mark_as_paid")),1)],8,ue)):c("",!0),s.invoice.type==="invoice"&&["finalized","sent","paid"].includes(s.invoice.status)&&!s.invoice.credit_note?(o(),n("button",{key:2,onClick:X,disabled:u.value,class:"inline-flex items-center rounded-md border border-red-300 bg-white px-3 py-2 text-sm font-medium text-red-700 shadow-sm hover:bg-red-50 dark:border-red-600 dark:bg-gray-700 dark:text-red-400 dark:hover:bg-gray-600"},[r[10]||(r[10]=e("svg",{class:"-ml-0.5 mr-1.5 h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2.121 2.121 0 013 3l-4.9 4.9a2.121 2.121 0 01-1.5.621h-1a.5.5 0 01-.5-.5v-1a2.121 2.121 0 01.621-1.5z","clip-rule":"evenodd"})],-1)),g(" "+t(i(a)("credit_note")),1)],8,he)):c("",!0)])])]),default:f(()=>[e("div",ye,[e("div",xe,[e("div",ve,[e("div",me,[e("h2",be,t(i(a)("issuer")),1)]),e("div",_e,[s.invoice.seller_snapshot?(o(),n("div",fe,[e("p",ke,t(s.invoice.seller_snapshot.company_name),1),s.invoice.seller_snapshot.legal_name?(o(),n("p",pe,t(s.invoice.seller_snapshot.legal_name),1)):c("",!0),e("p",null,t(s.invoice.seller_snapshot.address_line1),1),s.invoice.seller_snapshot.address_line2?(o(),n("p",we,t(s.invoice.seller_snapshot.address_line2),1)):c("",!0),e("p",null,t(s.invoice.seller_snapshot.postal_code)+" "+t(s.invoice.seller_snapshot.city),1),e("p",null,t(s.invoice.seller_snapshot.country),1),e("p",Ce,[e("span",ze,t(i(a)("matricule"))+":",1),g(" "+t(s.invoice.seller_snapshot.matricule),1)]),s.invoice.seller_snapshot.vat_number?(o(),n("p",Me,[e("span",Le,t(i(a)("vat_number_short"))+":",1),g(" "+t(s.invoice.seller_snapshot.vat_number),1)])):c("",!0)])):c("",!0)])]),e("div",je,[e("div",Se,[e("h2",Be,t(i(a)("client")),1)]),e("div",Fe,[s.invoice.buyer_snapshot?(o(),n("div",Ve,[e("p",$e,t(s.invoice.buyer_snapshot.name),1),s.invoice.buyer_snapshot.company_name?(o(),n("p",He,t(s.invoice.buyer_snapshot.company_name),1)):c("",!0),e("p",null,t(s.invoice.buyer_snapshot.address_line1),1),s.invoice.buyer_snapshot.address_line2?(o(),n("p",Ne,t(s.invoice.buyer_snapshot.address_line2),1)):c("",!0),e("p",null,t(s.invoice.buyer_snapshot.postal_code)+" "+t(s.invoice.buyer_snapshot.city),1),e("p",null,t(s.invoice.buyer_snapshot.country),1),s.invoice.buyer_snapshot.vat_number?(o(),n("p",Ae,[e("span",De,t(i(a)("vat_number_short"))+":",1),g(" "+t(s.invoice.buyer_snapshot.vat_number),1)])):c("",!0)])):c("",!0)])])]),e("div",Pe,[e("div",Ue,[e("h2",Te,t(i(a)("details")),1)]),e("div",Re,[e("dl",Ee,[e("div",null,[e("dt",qe,t(i(a)("issue_date")),1),e("dd",Ie,t(z(s.invoice.issued_at)),1)]),e("div",null,[e("dt",Oe,t(i(a)("due_date")),1),e("dd",Ge,t(z(s.invoice.due_at)),1)]),s.invoice.sent_at?(o(),n("div",Je,[e("dt",Ke,t(i(a)("sent_on")),1),e("dd",Qe,t(z(s.invoice.sent_at)),1)])):c("",!0),s.invoice.paid_at?(o(),n("div",We,[e("dt",Xe,t(i(a)("paid_on")),1),e("dd",Ye,t(z(s.invoice.paid_at)),1)])):c("",!0),s.invoice.credit_note_for?(o(),n("div",Ze,[e("dt",et,t(i(a)("credit_note_for")),1),e("dd",tt,[s.invoice.original_invoice?(o(),U(i(j),{key:0,href:l.route("invoices.show",s.invoice.credit_note_for),class:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},{default:f(()=>[g(t(i(a)("invoice"))+" "+t(s.invoice.original_invoice.number),1)]),_:1},8,["href"])):(o(),U(i(j),{key:1,href:l.route("invoices.show",s.invoice.credit_note_for),class:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},{default:f(()=>[g(t(i(a)("see_original_invoice")),1)]),_:1},8,["href"]))])])):c("",!0),s.invoice.credit_note_reason?(o(),n("div",st,[e("dt",at,t(i(a)("reason")),1),e("dd",it,t(N.value[s.invoice.credit_note_reason]||s.invoice.credit_note_reason),1)])):c("",!0)])])]),e("div",rt,[e("div",ot,[e("h2",dt,t(i(a)("invoice_lines")),1)]),e("div",nt,[e("table",lt,[e("thead",ct,[e("tr",null,[e("th",gt,t(i(a)("description")),1),e("th",ut,t(i(a)("qty")),1),e("th",ht,t(i(a)("price_ht")),1),e("th",yt,t(i(a)("vat")),1),e("th",xt,t(i(a)("total_ht")),1)])]),e("tbody",vt,[(o(!0),n(k,null,p(s.invoice.items,d=>(o(),n("tr",{key:d.id},[e("td",mt,t(d.description),1),e("td",bt,t(d.quantity),1),e("td",_t,t(v(d.unit_price,s.invoice.currency)),1),e("td",ft,t(d.vat_rate)+"% ",1),e("td",kt,t(v(d.total_ht,s.invoice.currency)),1)]))),128))]),e("tfoot",pt,[e("tr",null,[e("td",wt,t(i(a)("total_ht")),1),e("td",Ct,t(v(s.invoice.total_ht,s.invoice.currency)),1)]),e("tr",null,[e("td",zt,t(i(a)("total_vat")),1),e("td",Mt,t(v(s.invoice.total_vat,s.invoice.currency)),1)]),e("tr",Lt,[e("td",jt,t(i(a)("total_ttc")),1),e("td",{class:V(["whitespace-nowrap py-3 pl-3 pr-6 text-right text-sm font-bold",s.invoice.type==="credit_note"?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"])},t(v(s.invoice.total_ttc,s.invoice.currency)),3)])])])])]),s.invoice.notes?(o(),n("div",St,[e("div",Bt,[e("h2",Ft,t(i(a)("notes")),1)]),e("div",Vt,[e("p",$t,t(s.invoice.notes),1)])])):c("",!0),s.invoice.credit_notes&&s.invoice.credit_notes.length>0?(o(),n("div",Ht,[e("div",Nt,[e("h2",At,t(i(a)("related_credit_notes")),1)]),e("div",Dt,[e("ul",Pt,[(o(!0),n(k,null,p(s.invoice.credit_notes,d=>(o(),n("li",{key:d.id,class:"py-3 flex justify-between items-center"},[L(i(j),{href:l.route("invoices.show",d.id),class:"text-indigo-600 hover:text-indigo-500 dark:text-indigo-400"},{default:f(()=>[g(t(d.number),1)]),_:2},1032,["href"]),e("span",Ut,t(v(d.total_ttc,d.currency)),1)]))),128))])])])):c("",!0)]),w.value?(o(),n("div",Tt,[e("div",Rt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:D}),e("div",Et,[e("div",qt,[e("h3",It,t(i(a)("create_credit_note_for").replace(":number",s.invoice.number)),1),e("div",Ot,[e("label",Gt,t(i(a)("credit_note_type")),1),e("div",Jt,[e("label",Kt,[$(e("input",{type:"radio","onUpdate:modelValue":r[0]||(r[0]=d=>h.value=d),value:"full",class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[T,h.value]]),e("span",Qt,t(i(a)("full_credit_note")),1)]),e("label",Wt,[$(e("input",{type:"radio","onUpdate:modelValue":r[1]||(r[1]=d=>h.value=d),value:"partial",class:"h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[T,h.value]]),e("span",Xt,t(i(a)("partial_credit_note")),1)])])]),e("div",Yt,[e("label",Zt,t(i(a)("credit_note_reason")),1),$(e("select",{id:"credit_note_reason","onUpdate:modelValue":r[2]||(r[2]=d=>i(x).reason=d),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[(o(!0),n(k,null,p(N.value,(d,M)=>(o(),n("option",{key:M,value:M},t(d),9,es))),128))],512),[[se,i(x).reason]])]),h.value==="partial"?(o(),n("div",ts,[e("label",ss,t(i(a)("lines_to_cancel")),1),e("div",as,[(o(!0),n(k,null,p(s.invoice.items,d=>(o(),n("label",{key:d.id,class:"flex items-center px-3 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"},[e("input",{type:"checkbox",checked:y.value.includes(d.id),onChange:M=>Y(d.id),class:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,40,is),e("span",rs,t(d.title||d.description),1),e("span",os,t(v(d.total_ttc,s.invoice.currency)),1)]))),128))]),y.value.length===0?(o(),n("p",ds,t(i(a)("select_at_least_one_line")),1)):c("",!0)])):c("",!0),e("div",ns,[e("div",ls,[e("span",cs,t(i(a)("credit_note_amount"))+" : ",1),e("span",gs,t(h.value==="partial"?v(-G.value,s.invoice.currency):v(-s.invoice.total_ttc,s.invoice.currency)),1)])]),e("p",us,t(i(a)("credit_note_draft_info")),1)]),e("div",hs,[e("button",{type:"button",onClick:Z,disabled:!A.value||i(x).processing,class:"inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 disabled:opacity-50 sm:ml-3 sm:w-auto"},t(i(x).processing?i(a)("creating"):i(a)("create_credit_note")),9,ys),e("button",{type:"button",onClick:D,class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-600 dark:text-white dark:ring-gray-500 sm:mt-0 sm:w-auto"},t(i(a)("cancel")),1)])])])])):c("",!0),_.value?(o(),n("div",xs,[e("div",vs,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:r[3]||(r[3]=d=>_.value=!1)}),e("div",ms,[e("div",bs,[e("h3",_s,[s.invoice.type==="credit_note"?(o(),n("span",fs,t(i(a)("credit_note")),1)):c("",!0),g(" "+t(s.invoice.number),1)]),e("div",ks,[e("div",ps,[(o(),n(k,null,p(E,d=>e("button",{key:d.value,type:"button",onClick:M=>I(d.value),title:d.label,class:V(["px-2 py-1.5 text-base transition-colors",C.value===d.value?"bg-indigo-100 dark:bg-indigo-900":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"])},t(d.flag),11,ws)),64))]),e("a",{href:q.value,target:"_blank",class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300"},[...r[11]||(r[11]=[e("svg",{class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.235a.75.75 0 10-1.09 1.03l4.25 4.5a.75.75 0 001.09 0l4.25-4.5a.75.75 0 00-1.09-1.03l-2.955 3.129V2.75z"}),e("path",{d:"M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z"})],-1),g(" PDF ",-1)])],8,Cs),e("button",{type:"button",onClick:r[4]||(r[4]=d=>_.value=!1),class:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"},[...r[12]||(r[12]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",zs,[F.value?(o(),n("div",Ms,[...r[13]||(r[13]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):(o(),n("div",{key:1,class:"bg-white shadow-lg mx-auto",style:{width:"210mm","min-height":"297mm",transform:"scale(1)","transform-origin":"top center"},innerHTML:B.value},null,8,Ls))]),e("div",js,[e("button",{type:"button",onClick:r[5]||(r[5]=d=>_.value=!1),class:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-600 dark:text-white dark:ring-gray-500"},t(i(a)("close")),1)])])])])):c("",!0)]),_:1})],64))}};export{Ns as default};
