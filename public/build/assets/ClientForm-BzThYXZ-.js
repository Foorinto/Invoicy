import{p as T,c as n,b as t,t as d,u as s,F as _,r as w,n as x,q as y,C as F,a as l,d as p,B as S,v as V,w as U,g as L,o as i,s as I,f as D,A as v,D as z}from"./app-DttYSkTm.js";import{a as u,_ as m}from"./InputError-CTz5esX2.js";import{P as j}from"./PrimaryButton-i0z5pT5T.js";import{_ as b}from"./TextInput-Cv8O1PQw.js";import{_ as H}from"./VatScenarioIndicator-CjeYpMIj.js";import{u as O}from"./useTranslations-CnG4bCOe.js";const G={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},K={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},W={class:"text-lg font-medium text-gray-900 dark:text-white"},X={class:"px-6 py-4"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Z=["value"],J={class:"ml-3"},Q={class:"block text-sm font-medium text-gray-900 dark:text-white"},ee={class:"block text-sm text-gray-500 dark:text-gray-400"},te={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},re={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ae={class:"text-lg font-medium text-gray-900 dark:text-white"},le={class:"px-6 py-4 space-y-4"},oe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},se={key:0},de={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},ne=["value"],ie={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},ue={key:0,class:"text-amber-600 text-xs font-medium"},me={key:1,class:"text-gray-400 text-xs"},ce={key:2,class:"text-gray-400 text-xs"},ge={class:"flex items-center justify-between"},be={class:"text-sm font-medium text-gray-900 dark:text-white"},fe={class:"text-right"},ve={class:"text-xs text-gray-500 dark:text-gray-400"},ye={key:0,class:"mt-3 text-sm text-amber-600 dark:text-amber-400"},xe={key:0,class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},he={class:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800"},ke={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},_e={class:"text-lg font-medium text-gray-900 dark:text-white"},we={class:"px-6 py-4 space-y-4"},pe={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ve=["value"],Ue=["value"],Le={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Be=["placeholder"],Re={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Ee={class:"flex justify-end space-x-3"},Se={key:0},Ce={key:1},Te={__name:"ClientForm",props:{form:{type:Object,required:!0},clientTypes:{type:Array,required:!0},currencies:{type:Array,required:!0},countries:{type:Array,required:!0},submitLabel:{type:String,default:null},cancelRoute:{type:String,default:"clients.index"},cancelRouteParams:{type:[Object,Number,String],default:null},sellerVatRegime:{type:String,default:"franchise"}},emits:["submit"],setup(e,{emit:C}){const{t:r}=O(),$=z(),c=e,q=C,g=v(()=>c.form.type==="b2b"),B=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],P=v(()=>B.includes(c.form.country_code)),N=v(()=>c.form.country_code==="LU"),R=v(()=>P.value&&!N.value),E=v(()=>c.form.vat_number&&c.form.vat_number.trim()!==""),h=v(()=>{if(c.sellerVatRegime==="franchise")return{key:"FRANCHISE",label:r("vat_scenario_franchise"),description:r("vat_scenario_franchise_desc"),rate:0,mention:"franchise",color:"gray"};const f=c.form.country_code||"LU",o=c.form.type||"b2b";return f==="LU"?{key:o==="b2b"?"B2B_LU":"B2C_LU",label:r(o==="b2b"?"vat_scenario_b2b_lu":"vat_scenario_b2c_lu"),description:r("vat_scenario_lu_desc"),rate:17,mention:null,color:"green"}:B.includes(f)?o==="b2b"&&E.value?{key:"B2B_INTRA_EU",label:r("vat_scenario_b2b_intra"),description:r("vat_scenario_b2b_intra_desc"),rate:0,mention:"reverse_charge",color:"blue"}:{key:o==="b2b"?"B2B_LU":"B2C_LU",label:r(o==="b2b"?"vat_scenario_b2b_eu_no_vat":"vat_scenario_b2c_eu"),description:r("vat_scenario_eu_desc"),rate:17,mention:null,color:"yellow"}:{key:"EXPORT",label:r("vat_scenario_export"),description:r("vat_scenario_export_desc"),rate:0,mention:"export",color:"purple"}}),A=v(()=>g.value&&R.value&&!E.value);T(()=>c.form.type,f=>{f==="b2c"&&(c.form.vat_number="")});const M=()=>{q("submit")};return(f,o)=>(i(),n("form",{onSubmit:D(M,["prevent"]),class:"space-y-8"},[t("div",G,[t("div",K,[t("h2",W,d(s(r)("client_type")),1)]),t("div",X,[t("div",Y,[(i(!0),n(_,null,w(e.clientTypes,a=>(i(),n("label",{key:a.value,class:x(["flex items-start p-4 rounded-lg border cursor-pointer transition-colors",[e.form.type===a.value?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"]])},[y(t("input",{type:"radio","onUpdate:modelValue":o[0]||(o[0]=k=>e.form.type=k),value:a.value,class:"mt-0.5 h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Z),[[F,e.form.type]]),t("div",J,[t("span",Q,d(a.label),1),t("span",ee,d(a.description),1)])],2))),128))]),l(u,{message:e.form.errors.type,class:"mt-2"},null,8,["message"])])]),t("div",te,[t("div",re,[t("h2",ae,d(s(r)("client_info")),1)]),t("div",le,[t("div",oe,[t("div",null,[l(m,{for:"name",value:g.value?s(r)("company_name"):s(r)("full_name")},null,8,["value"]),l(b,{id:"name",modelValue:e.form.name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.form.name=a),type:"text",class:"mt-1 block w-full",required:"",placeholder:g.value?"Société Exemple SARL":"Marie Durand"},null,8,["modelValue","placeholder"]),l(u,{message:e.form.errors.name,class:"mt-2"},null,8,["message"])]),g.value?(i(),n("div",se,[l(m,{for:"contact_name",value:`${s(r)("director_contact")} (${s(r)("optional")})`},null,8,["value"]),l(b,{id:"contact_name",modelValue:e.form.contact_name,"onUpdate:modelValue":o[2]||(o[2]=a=>e.form.contact_name=a),type:"text",class:"mt-1 block w-full",placeholder:"Pierre Exemple"},null,8,["modelValue"]),l(u,{message:e.form.errors.contact_name,class:"mt-2"},null,8,["message"])])):p("",!0),t("div",null,[l(m,{for:"email",value:s(r)("email")},null,8,["value"]),l(b,{id:"email",modelValue:e.form.email,"onUpdate:modelValue":o[3]||(o[3]=a=>e.form.email=a),type:"email",class:"mt-1 block w-full",required:"",placeholder:"contact@example.com"},null,8,["modelValue"]),l(u,{message:e.form.errors.email,class:"mt-2"},null,8,["message"])])]),t("div",null,[l(m,{for:"address",value:s(r)("address")},null,8,["value"]),y(t("textarea",{id:"address","onUpdate:modelValue":o[4]||(o[4]=a=>e.form.address=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"2",placeholder:"10 Rue Fictive"},null,512),[[S,e.form.address]]),l(u,{message:e.form.errors.address,class:"mt-2"},null,8,["message"])]),t("div",de,[t("div",null,[l(m,{for:"postal_code",value:s(r)("postal_code")},null,8,["value"]),l(b,{id:"postal_code",modelValue:e.form.postal_code,"onUpdate:modelValue":o[5]||(o[5]=a=>e.form.postal_code=a),type:"text",class:"mt-1 block w-full",placeholder:"L-2000"},null,8,["modelValue"]),l(u,{message:e.form.errors.postal_code,class:"mt-2"},null,8,["message"])]),t("div",null,[l(m,{for:"city",value:s(r)("city")},null,8,["value"]),l(b,{id:"city",modelValue:e.form.city,"onUpdate:modelValue":o[6]||(o[6]=a=>e.form.city=a),type:"text",class:"mt-1 block w-full",placeholder:"Luxembourg"},null,8,["modelValue"]),l(u,{message:e.form.errors.city,class:"mt-2"},null,8,["message"])]),t("div",null,[l(m,{for:"country_code",value:s(r)("country")},null,8,["value"]),y(t("select",{id:"country_code","onUpdate:modelValue":o[7]||(o[7]=a=>e.form.country_code=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(i(!0),n(_,null,w(e.countries,a=>(i(),n("option",{key:a.code,value:a.code},d(a.name),9,ne))),128))],512),[[V,e.form.country_code]]),l(u,{message:e.form.errors.country_code,class:"mt-2"},null,8,["message"])])]),t("div",ie,[t("div",null,[l(m,{for:"phone",value:`${s(r)("phone")} (${s(r)("optional")})`},null,8,["value"]),l(b,{id:"phone",modelValue:e.form.phone,"onUpdate:modelValue":o[8]||(o[8]=a=>e.form.phone=a),type:"tel",class:"mt-1 block w-full",placeholder:"+352 000 000 000"},null,8,["modelValue"]),l(u,{message:e.form.errors.phone,class:"mt-2"},null,8,["message"])]),t("div",null,[l(m,{for:"vat_number"},{default:U(()=>[L(d(s(r)("vat_number"))+" ",1),g.value&&R.value?(i(),n("span",ue,"("+d(s(r)("vat_required_for_reverse_charge"))+")",1)):g.value?(i(),n("span",me,"("+d(s(r)("vat_recommended_b2b"))+")",1)):(i(),n("span",ce,"("+d(s(r)("optional"))+")",1))]),_:1}),l(b,{id:"vat_number",modelValue:e.form.vat_number,"onUpdate:modelValue":o[9]||(o[9]=a=>e.form.vat_number=a),type:"text",class:x(["mt-1 block w-full font-mono uppercase",{"bg-gray-100 dark:bg-gray-600":!g.value}]),placeholder:"LU00000000"},null,8,["modelValue","class"]),l(u,{message:e.form.errors.vat_number,class:"mt-2"},null,8,["message"])])]),t("div",{class:x(["rounded-lg border p-4",[h.value.rate===0?"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20":"border-gray-200 bg-gray-50 dark:border-gray-700 dark:bg-gray-800"]])},[t("div",ge,[t("div",null,[t("h4",be,d(s(r)("vat_scenario_detected")),1),l(H,{scenario:h.value,size:"sm",class:"mt-2"},null,8,["scenario"])]),t("div",fe,[t("span",{class:x(["text-2xl font-bold",[h.value.rate===0?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"]])},d(h.value.rate)+"% ",3),t("p",ve,d(s(r)("vat_rate")),1)])]),A.value?(i(),n("p",ye,[o[14]||(o[14]=t("svg",{class:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),L(" "+d(s(r)("vat_warning_no_number")),1)])):p("",!0)],2),g.value?(i(),n("div",xe,[t("div",null,[l(m,{for:"registration_number",value:`${s(r)("registration_number")} (${s(r)("optional")})`},null,8,["value"]),l(b,{id:"registration_number",modelValue:e.form.registration_number,"onUpdate:modelValue":o[10]||(o[10]=a=>e.form.registration_number=a),type:"text",class:"mt-1 block w-full font-mono",placeholder:"B000000"},null,8,["modelValue"]),l(u,{message:e.form.errors.registration_number,class:"mt-2"},null,8,["message"])])])):p("",!0)])]),t("div",he,[t("div",ke,[t("h2",_e,d(s(r)("billing_settings")),1)]),t("div",we,[t("div",pe,[t("div",null,[l(m,{for:"currency",value:s(r)("default_currency")},null,8,["value"]),y(t("select",{id:"currency","onUpdate:modelValue":o[11]||(o[11]=a=>e.form.currency=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",required:""},[(i(!0),n(_,null,w(e.currencies,a=>(i(),n("option",{key:a.value,value:a.value},d(a.label),9,Ve))),128))],512),[[V,e.form.currency]]),l(u,{message:e.form.errors.currency,class:"mt-2"},null,8,["message"])]),t("div",null,[l(m,{for:"locale",value:s(r)("document_language")},null,8,["value"]),y(t("select",{id:"locale","onUpdate:modelValue":o[12]||(o[12]=a=>e.form.locale=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},[(i(!0),n(_,null,w(s($).props.availableLocales,(a,k)=>(i(),n("option",{key:k,value:k},d(a),9,Ue))),128))],512),[[V,e.form.locale]]),t("p",Le,d(s(r)("document_language_help")),1),l(u,{message:e.form.errors.locale,class:"mt-2"},null,8,["message"])])]),t("div",null,[l(m,{for:"notes",value:`${s(r)("internal_notes")} (${s(r)("optional")})`},null,8,["value"]),y(t("textarea",{id:"notes","onUpdate:modelValue":o[13]||(o[13]=a=>e.form.notes=a),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white",rows:"3",placeholder:s(r)("internal_notes")},null,8,Be),[[S,e.form.notes]]),t("p",Re,d(s(r)("notes_not_visible")),1),l(u,{message:e.form.errors.notes,class:"mt-2"},null,8,["message"])])])]),t("div",Ee,[l(s(I),{href:e.cancelRouteParams?f.route(e.cancelRoute,e.cancelRouteParams):f.route(e.cancelRoute),class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"},{default:U(()=>[L(d(s(r)("cancel")),1)]),_:1},8,["href"]),l(j,{disabled:e.form.processing,class:x({"opacity-25":e.form.processing})},{default:U(()=>[e.form.processing?(i(),n("span",Se,d(s(r)("saving")),1)):(i(),n("span",Ce,d(e.submitLabel||s(r)("save")),1))]),_:1},8,["disabled","class"])])],32))}};export{Te as _};
